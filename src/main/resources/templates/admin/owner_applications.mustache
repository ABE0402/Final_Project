<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8"><title>점주 신청 - 관리자</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-body-tertiary">
{{> layout/header}}

<main class="container py-5" style="max-width:1000px;">
    <h4 class="mb-3">점주 신청 (대기)</h4>

    {{#flashMsg}}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{flashMsg}}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {{/flashMsg}}

    {{#msg}}<div class="alert alert-success">{{.}}</div>{{/msg}}
    {{#err}}<div class="alert alert-danger">{{.}}</div>{{/err}}

    <table class="table table-hover bg-white">
        <thead>
        <tr><th>ID</th><th>유저ID</th><th>유형</th><th>가게명</th><th>사업자번호</th><th>신청일</th><th></th></tr>
        </thead>
        <tbody>
        {{#apps}}
            <tr>
                <td>{{id}}</td>
                <td>{{userId}}</td>
                <td>{{storeType}}</td>
                <td>{{storeName}}</td>
                <td>{{businessNumber}}</td>
                <td>{{createdAt}}</td>
                <td><a class="btn btn-sm btn-primary" href="/admin/owner_applications/{{id}}">검토</a></td>
            </tr>
        {{/apps}}
        {{^apps}}
            <tr><td colspan="7" class="text-center text-muted">대기 중인 신청이 없습니다.</td></tr>
        {{/apps}}
        </tbody>
    </table>

    <hr class="my-5">

    <!-- ✅ 점주 계정 관리 -->
    <div class="d-flex align-items-center justify-content-between mb-2">
        <h4 class="m-0">점주 계정 관리</h4>
        <!-- (선택) 검색/필터 추후 확장 -->
    </div>

    <table class="table table-hover bg-white">
        <thead>
        <tr><th>유저ID</th><th>이메일</th><th>닉네임</th><th>이름</th><th>가입일</th><th style="width:260px;"></th></tr>
        </thead>
        <tbody>
        {{#owners}}
            <tr>
                <td>{{id}}</td>
                <td>{{email}}</td>
                <td>{{nickname}}</td>
                <td>{{name}}</td>
                <td>{{createdAt}}</td>
                <td>
                    <form method="post" action="/admin/owners/{{id}}/demote" class="d-flex gap-2 align-items-center">
                        {{#_csrf}}<input type="hidden" name="{{parameterName}}" value="{{token}}">{{/_csrf}}
                        <input name="reason" class="form-control form-control-sm" placeholder="사유(선택)">
                        <button class="btn btn-sm btn-outline-danger" type="submit"
                                onclick="return confirm('점주 권한을 회수하고 일반 유저로 변경합니다. 계속할까요?');">
                            권한 회수(일반으로)
                        </button>
                    </form>
                </td>
            </tr>
        {{/owners}}
        {{^owners}}
            <tr><td colspan="6" class="text-center text-muted">승인된 점주가 없습니다.</td></tr>
        {{/owners}}
        </tbody>
    </table>
</main>

{{> layout/footer}}
</body>
</html>
