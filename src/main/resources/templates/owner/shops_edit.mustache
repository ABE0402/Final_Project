<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8"><title>가게 수정</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-body-tertiary">
{{> layout/header}}

<main class="container py-5">
    <h3 class="fw-bold mb-4">가게 수정</h3>
    <div class="row g-4">
        <aside class="col-12 col-md-3">
            <div class="card shadow-sm"><div class="card-body p-0">{{> owner/sidebar}}</div></div>
        </aside>

        <section class="col-12 col-md-9">
            <div class="card shadow-sm"><div class="card-body p-4">
                <form method="post" action="/owner/shops/{{form.id}}/edit" enctype="multipart/form-data">
                    {{#_csrf}}<input type="hidden" name="{{parameterName}}" value="{{token}}">{{/_csrf}}

                    <div class="row g-3">
                        <div class="col-md-8">
                            <label class="form-label">가게 이름</label>
                            <input name="name" class="form-control" value="{{form.name}}" required />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">전화번호</label>
                            <input name="phone" class="form-control" value="{{form.phone}}" />
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">사업자번호</label>
                            <input name="businessNumber" class="form-control" value="{{form.businessNumber}}" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">우편번호</label>
                            <input name="postcode" class="form-control" value="{{form.postcode}}" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">대표 이미지</label>
                            <input type="file" name="image" accept="image/*" class="form-control" />
                            {{#form.heroImageUrl}}
                                <img src="{{.}}" alt="대표 이미지" class="mt-2 rounded" style="max-width:160px;height:auto" />
                            {{/form.heroImageUrl}}
                        </div>

                        <div class="col-12">
                            <label class="form-label">도로명 주소</label>
                            <input name="addressRoad" class="form-control" value="{{form.address}}" required />
                        </div>

                        <div class="col-12">
                            <label class="form-label">자기소개(가게 소개)</label>
                            <textarea name="description" rows="4" class="form-control">{{form.description}}</textarea>
                        </div>

                        <div class="col-12">
                            <label class="form-label">영업시간</label>
                            <textarea name="operatingHours" rows="3" class="form-control">{{form.operatingHours}}</textarea>
                        </div>

                        <div class="col-12">
                            <label class="form-label">메뉴 안내</label>
                            <textarea name="menuText" rows="5" class="form-control">{{form.menuText}}</textarea>
                        </div>

                        <div class="col-12">
                            <label class="form-label">메뉴 사진(최대 5장, 업로드 시 기존 교체)</label>
                            <input type="file" name="menuImages" class="form-control" accept="image/*" multiple />
                            {{#form.menuImages}}
                                <img src="{{.}}" class="mt-2 me-2 rounded" style="max-width:120px;height:auto" />
                            {{/form.menuImages}}
                        </div>
                    </div>

                    <hr class="my-4" />

                    <!-- 태그(컨트롤러에서 companionTags/moodTags/...를 주입해 주세요. 선택표시는 서버에서 selected 플래그로) -->
                    <div class="row g-3">
                        <!-- 예시: 동반인 -->
                        <div class="col-12">
                            <div class="card"><div class="card-body">
                                <h6 class="mb-2">동반인</h6>
                                <div class="d-flex flex-wrap gap-2">
                                    {{#companionTags}}
                                        <label class="border rounded-pill px-3 py-1">
                                            <input type="checkbox" class="me-1" name="tagIds" value="{{id}}" {{#selected}}checked{{/selected}} />
                                            {{name}}
                                        </label>
                                    {{/companionTags}}
                                </div>
                            </div></div>
                        </div>
                        <!-- 필요 카테고리만큼 반복 (mood/amenities/reservation/priority/type) -->
                    </div>

                    <div class="mt-4 d-flex">
                        <a class="btn btn-outline-secondary" href="/owner/shops">목록</a>
                        <button class="btn btn-olive ms-auto" type="submit">저장</button>
                    </div>
                </form>
            </div></div>
        </section>
    </div>
</main>

{{> layout/footer}}
</body>
</html>
