<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8"><title>가게 관리(승인됨) - 관리자</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-body-tertiary">
{{> layout/header}}

<main class="container py-5" style="max-width:1200px;">
    <h3 class="fw-bold mb-4">가게 관리 (승인됨)</h3>

    {{#msg}}<div class="alert alert-success">{{.}}</div>{{/msg}}

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="m-0">승인된 가게 목록</h5>
                <a class="btn btn-outline-secondary btn-sm" href="/admin/stores/pending">승인 대기 보기</a>
            </div>

            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>이름</th>
                        <th>주소</th>
                        <th>전화</th>
                        <th>노출</th>
                        <th>최종수정</th>
                        <th style="width:180px;"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {{#approvedCafes}}
                        <tr>
                            <td>{{id}}</td>
                            <td>{{name}}</td>
                            <td>{{addressRoad}}</td>
                            <td>{{#phone}}{{.}}{{/phone}}{{^phone}}-{{/phone}}</td>
                            <td>
                <span class="badge {{#isVisible}}bg-success{{/isVisible}}{{^isVisible}}bg-secondary{{/isVisible}}">
                  {{#isVisible}}노출{{/isVisible}}{{^isVisible}}숨김{{/isVisible}}
                </span>
                            </td>
                            <td>{{updatedAt}}</td>
                            <td>
                                <div class="d-flex gap-2">
                                    <form method="post" action="/admin/stores_approved/cafes/{{id}}/toggle-visible">
                                        {{#_csrf}}<input type="hidden" name="{{parameterName}}" value="{{token}}">{{/_csrf}}
                                        <button class="btn btn-sm {{#isVisible}}btn-outline-warning{{/isVisible}}{{^isVisible}}btn-outline-success{{/isVisible}}" type="submit">
                                            {{#isVisible}}숨김으로{{/isVisible}}{{^isVisible}}노출로{{/isVisible}}
                                        </button>
                                    </form>
                                    <!-- 필요하면 상세/수정 페이지 링크 자리 -->
                                    <!-- <a class="btn btn-sm btn-outline-secondary" href="/admin/stores/cafes/{{id}}">상세</a> -->
                                </div>
                            </td>
                        </tr>
                    {{/approvedCafes}}
                    {{^approvedCafes}}
                        <tr><td colspan="7" class="text-center text-muted">승인된 가게가 없습니다.</td></tr>
                    {{/approvedCafes}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>

{{> layout/footer}}
</body>
</html>
