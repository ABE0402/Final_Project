<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8"><title>마이페이지 - 예약내역</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{#_csrf}}<meta name="_csrf" content="{{token}}"><meta name="_csrf_header" content="{{headerName}}">{{/_csrf}}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/app.css">
    <script defer src="/js/my-reservations.js"></script>
</head>
<body class="bg-body-tertiary">
{{> layout/header}}

<main class="container py-5">
    <h3 class="fw-bold mb-4">예약 내역</h3>
    <div class="row g-4">
        <aside class="col-12 col-lg-3">
            {{> mypage/sidebar}}
        </aside>

        <section class="col-12 col-lg-9">
            <div class="card shadow-sm">
                <div class="card-body p-4">

                    <!-- 탭 스위치 -->
                    <div class="btn-group mb-3" role="group" aria-label="Reservation tabs">
                        <button type="button" class="btn btn-outline-secondary active time-period-btn" data-tab="cafe">카페</button>
                        <button type="button" class="btn btn-outline-secondary time-period-btn" data-tab="restaurant">레스토랑</button>
                    </div>

                    <!-- 카페 -->
                    <div id="tab-cafe">
                        {{#cafes}}
                            <div class="border rounded p-3 mb-3">
                                <div class="d-flex justify-content-between flex-wrap gap-2">
                                    <div>
                                        <div><b>매장:</b> {{targetName}}</div>
                                        <div class="small text-muted"><b>일시:</b> {{reservationAt}} · <b>인원:</b> {{partySize}}명</div>
                                        <div class="mt-1">
                      <span class="badge {{#isCancelled}}text-bg-secondary{{/isCancelled}}{{^isCancelled}}text-bg-success{{/isCancelled}}">
                          {{status}}
                      </span>
                                        </div>
                                    </div>
                                    {{^isCancelled}}
                                        <button class="btn btn-sm btn-outline-danger align-self-start cancel-btn" data-id="{{id}}">취소</button>
                                    {{/isCancelled}}
                                </div>
                            </div>
                        {{/cafes}}
                        {{^cafes}}<div class="text-muted">카페 예약이 없습니다.</div>{{/cafes}}
                    </div>

                    <!-- 레스토랑 -->
                    <div id="tab-restaurant" class="d-none">
                        {{#restaurants}}
                            <div class="border rounded p-3 mb-3">
                                <div class="d-flex justify-content-between flex-wrap gap-2">
                                    <div>
                                        <div><b>매장:</b> {{targetName}}</div>
                                        <div class="small text-muted"><b>일시:</b> {{reservationAt}} · <b>인원:</b> {{partySize}}명</div>
                                        <div class="mt-1">
                      <span class="badge {{#isCancelled}}text-bg-secondary{{/isCancelled}}{{^isCancelled}}text-bg-success{{/isCancelled}}">
                          {{status}}
                      </span>
                                        </div>
                                    </div>
                                    {{^isCancelled}}
                                        <button class="btn btn-sm btn-outline-danger align-self-start cancel-btn" data-id="{{id}}">취소</button>
                                    {{/isCancelled}}
                                </div>
                            </div>
                        {{/restaurants}}
                        {{^restaurants}}<div class="text-muted">레스토랑 예약이 없습니다.</div>{{/restaurants}}
                    </div>

                </div>
            </div>
        </section>
    </div>
</main>

{{> layout/footer}}
</body>
</html>
