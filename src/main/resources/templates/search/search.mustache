<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HonG Around</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
</head>
<body>
{{> layout/header}}


<main class="bg-body-tertiary py-5">
    <div class="container text-center">
        <h1 class="display-3 fw-bold brand-title">HonG Around</h1>

        <form action="/searchresult" method="get" class="mx-auto mt-4" style="max-width: 640px;">
            <input type="hidden" id="search-category" name="category" value="all">
            <input type="hidden" id="search-companion" name="companion">
            <input type="hidden" id="search-mood" name="mood">
            <input type="hidden" id="search-amenities" name="amenities">
            <input type="hidden" id="search-reservation" name="reservation">
            <input type="hidden" id="search-days" name="days">
            <input type="hidden" id="search-sort" name="sort" value="hits">
            <input type="hidden" id="search-type" name="type">

            <div class="input-group input-group-lg shadow-sm">
                <div class="btn-group">
                    <button type="button" id="category-dropdown-button" class="btn btn-outline-secondary dropdown-toggle"
                            data-bs-toggle="dropdown" aria-expanded="false">
                        ì „ì²´
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item main-category-item" href="#" data-value="all">ì „ì²´</a></li>
                        <li><a class="dropdown-item main-category-item" href="#" data-value="restaurant">ğŸ½ï¸ ì‹ë‹¹</a></li>
                        <li><a class="dropdown-item main-category-item" href="#" data-value="cafe">â˜• ì¹´í˜</a></li>
                    </ul>
                </div>

                <input type="search" name="query" class="form-control" placeholder="ê°€ê²Œ ì´ë¦„, ë©”ë‰´, ì§€ì—­ ê²€ìƒ‰" aria-label="Search">

                <button class="btn btn-info text-white" type="button" id="cafe-filter-trigger" style="display: none;"
                        data-bs-toggle="modal" data-bs-target="#filterModal">
                    ì¹´í˜ í•„í„°
                </button>
                <button class="btn btn-warning text-dark" type="button" id="restaurant-filter-trigger" style="display: none;"
                        data-bs-toggle="modal" data-bs-target="#filterModal">
                    ì‹ë‹¹ í•„í„°
                </button>

                <button class="btn btn-primary" type="submit">ğŸ”</button>
            </div>
        </form>

    </div>

    <div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="filterModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="filterModalLabel">â˜• ì¹´í˜ ìƒì„¸ í•„í„°</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="filter-group mb-4">
                        <h6>ë™ë°˜ì¸ <small class="text-muted">(ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)</small></h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-companion">
                            <button type="button" class="btn btn-outline-secondary" data-value="solo">ğŸ‘¤ 1ì¸</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="friends">ğŸ‰ ì¹œêµ¬</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="couple">ğŸ’– ì»¤í”Œ</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ê°€ì¡±</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="group">ğŸ¢ ë‹¨ì²´</button>
                        </div>
                    </div>

                    <div class="filter-group mb-4">
                        <h6>ë¶„ìœ„ê¸° <small class="text-muted">(ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)</small></h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-mood">
                            <button type="button" class="btn btn-outline-secondary" data-value="quiet">ğŸ¤« ì¡°ìš©í•œ</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="talk">ğŸ’¬ ëŒ€í™”í•˜ê¸° ì¢‹ì€</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="study">ğŸ“š ì¹´ê³µí•˜ê¸° ì¢‹ì€</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="photo-spot">ğŸ“¸ ì‚¬ì§„ ë§›ì§‘</button>
                        </div>
                    </div>

                    <div class="filter-group mb-4">
                        <h6>í¸ì˜ ë° ì„œë¹„ìŠ¤ <small class="text-muted">(ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)</small></h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-amenities">
                            <button type="button" class="btn btn-outline-secondary" data-value="parking">ğŸš— ì£¼ì°¨ì¥</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="pet-friendly">ğŸ¾ ë°˜ë ¤ë™ë¬¼</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="takeout">ğŸ¥¡ í¬ì¥</button>
                        </div>
                    </div>

                    <div class="filter-group mb-4">
                        <h6>ì˜ì—… ìš”ì¼ <small class="text-muted">(ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)</small></h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-days">
                            <button type="button" class="btn btn-outline-secondary" data-value="mon">ì›”</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="tue">í™”</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="wed">ìˆ˜</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="thu">ëª©</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="fri">ê¸ˆ</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="sat">í† </button>
                            <button type="button" class="btn btn-outline-secondary" data-value="sun">ì¼</button>
                        </div>
                    </div>

                    <div class="filter-group mb-4">
                        <h6>ì¢…ë¥˜ <small class="text-muted">(ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)</small></h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-type">
                            <button type="button" class="btn btn-outline-secondary" data-value="dessert">ğŸ° ë””ì €íŠ¸ ì „ë¬¸</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="coffee">â˜• ì»¤í”¼ ì „ë¬¸</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="interior">ğŸ›‹ï¸ ì¸í…Œë¦¬ì–´ ë§›ì§‘</button>
                        </div>
                    </div>

                    <div class="filter-group mb-4">
                        <h6>ì˜ˆì•½ ì—¬ë¶€</h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-reservation">
                            <button type="button" class="btn btn-outline-secondary" data-value="any">ìƒê´€ì—†ìŒ</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="possible">âœ… ê°€ëŠ¥</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="impossible">âŒ ë¶ˆê°€ëŠ¥</button>
                        </div>
                    </div>

                    <div class="filter-group mb-4">
                        <h6>ìš°ì„ ìˆœìœ„ (ì •ë ¬)</h6>
                        <div class="btn-group flex-wrap gap-2" role="group" id="filter-sort">
                            <button type="button" class="btn btn-secondary" data-value="hits">â­ ë§ì´ ì°¾ëŠ” ìˆœ</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="reviews">ğŸ“ ë¦¬ë·° ë§ì€ ìˆœ</button>
                            <button type="button" class="btn btn-outline-secondary" data-value="rating">ğŸ‘ í‰ì  ë†’ì€ ìˆœ</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" id="reset-filters">ì´ˆê¸°í™”</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="apply-filters">í•„í„° ì ìš©</button>
                </div>
            </div>
        </div>
    </div>


    <div class="container mt-5">
        <hr class="my-4">
        <section class="mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h5 class="mb-0">ì¶”ì²œ ìŠ¤íŒŸ</h5>
                <div class="btn-group btn-group-sm" role="group">
                    <button class="btn btn-outline-secondary active">ì „ì²´</button>
                    <button class="btn btn-outline-secondary">í‰ì ìˆœ</button>
                    <button class="btn btn-outline-secondary">ë¦¬ë·°ìˆœ</button>
                </div>
            </div>


            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3">
                {{#cards}}
                    <div class="col">
                        <a class="card h-100 text-decoration-none text-reset" href="/{{type == 'CAFE' ? 'cafes' : 'restaurants'}}/{{id}}">
                            <div class="ratio ratio-16x9 bg-light card-img-top" style="background-image:url('{{heroImageUrl}}'); background-size:cover; background-position:center"></div>
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <h6 class="card-title text-truncate">{{name}}</h6>
                                    <span class="badge text-bg-success">{{type}}</span>
                                </div>
                                <div class="small text-muted text-truncate">{{address}}</div>
                                <div class="mt-2 small">â­ {{averageRating}} Â· ë¦¬ë·° {{reviewCount}}</div>
                            </div>
                        </a>
                    </div>
                {{/cards}}
                {{^cards}}
                    <div class="col"><div class="alert alert-light border">ì•„ì§ ë°ì´í„°ê°€ ì—†ì–´ìš”. ê°€ê²Œë¥¼ ë“±ë¡í•´ ë³´ì„¸ìš”!</div></div>
                {{/cards}}
            </div>
        </section>
    </div>
</main>


{{> layout/footer}}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html><script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- DOM ìš”ì†Œ ì„ íƒ ---
        const mainCategoryButton = document.getElementById('category-dropdown-button');
        const mainCategoryInput = document.getElementById('search-category');
        const mainDropdownItems = document.querySelectorAll('.main-category-item');
        const cafeFilterTrigger = document.getElementById('cafe-filter-trigger');
        const restaurantFilterTrigger = document.getElementById('restaurant-filter-trigger');
        const modalTitle = document.getElementById('filterModalLabel');
        const modalBody = document.querySelector('#filterModal .modal-body');

        // âœ… 1. 'ì¹´í˜'ì™€ 'ì‹ë‹¹' í•„í„° ë°ì´í„°ë¥¼ ë³„ë„ ê°ì²´ë¡œ ì •ì˜
        const filterData = {
            cafe: {
                title: 'â˜• ì¹´í˜ ìƒì„¸ í•„í„°',
                groups: [
                    { id: 'companion', title: 'ë™ë°˜ì¸', multi: true, options: [
                        { value: 'solo', text: 'ğŸ‘¤ 1ì¸' }, { value: 'friends', text: 'ğŸ‰ ì¹œêµ¬' }, { value: 'couple', text: 'ğŸ’– ì»¤í”Œ' }, { value: 'family', text: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ê°€ì¡±' }, { value: 'group', text: 'ğŸ¢ ë‹¨ì²´' }
                    ]},
                    { id: 'mood', title: 'ë¶„ìœ„ê¸°', multi: true, options: [
                        { value: 'quiet', text: 'ğŸ¤« ì¡°ìš©í•œ' }, { value: 'talk', text: 'ğŸ’¬ ëŒ€í™”í•˜ê¸° ì¢‹ì€' }, { value: 'study', text: 'ğŸ“š ì¹´ê³µí•˜ê¸° ì¢‹ì€' }, { value: 'feel good', text: 'ğŸ· ë¶„ìœ„ê¸° ì¢‹ì€' }, { value: 'date', text: 'ğŸ’– ë°ì´íŠ¸í•˜ê¸° ì¢‹ì€' }, { value: 'photo-spot', text: 'ğŸ“¸ ì‚¬ì§„ ë§›ì§‘' }
                    ]},
                    { id: 'amenities', title: 'í¸ì˜ ë° ì„œë¹„ìŠ¤', multi: true, options: [
                        { value: 'parking', text: 'ğŸš— ì£¼ì°¨ì¥' }, { value: 'toilet', text: 'ğŸš» í™”ì¥ì‹¤' }, { value: 'pet-friendly', text: 'ğŸ¾ ë°˜ë ¤ë™ë¬¼' }, { value: 'waiting room', text: 'ğŸ›Œ ëŒ€ê¸°ì‹¤' }, { value: 'takeout', text: 'ğŸ¥¡ í¬ì¥' }
                    ]},
                    { id: 'days', title: 'ì˜ì—… ìš”ì¼', multi: true, options: [
                        { value: 'mon', text: 'ì›”' }, { value: 'tue', text: 'í™”' }, { value: 'wed', text: 'ìˆ˜' }, { value: 'thu', text: 'ëª©' }, { value: 'fri', text: 'ê¸ˆ' }, { value: 'sat', text: 'í† ' }, { value: 'sun', text: 'ì¼' }
                    ]},
                    { id: 'type', title: 'ì¢…ë¥˜', multi: true, options: [
                        { value: 'dessert', text: 'ğŸ° ë””ì €íŠ¸ ì „ë¬¸' }, { value: 'coffee', text: 'â˜• ì»¤í”¼ ì „ë¬¸' }, { value: 'interior', text: 'ğŸ›‹ï¸ ì¸í…Œë¦¬ì–´ ë§›ì§‘' }, { value: 'photo-spot', text: 'ğŸ“¸ ì‚¬ì§„ ë§›ì§‘' }
                    ]},
                    { id: 'reservation', title: 'ì˜ˆì•½ ì—¬ë¶€', multi: false, default: 'any', options: [
                        { value: 'any', text: 'ìƒê´€ì—†ìŒ' }, { value: 'possible', text: 'âœ… ê°€ëŠ¥' }, { value: 'impossible', text: 'âŒ ë¶ˆê°€ëŠ¥' }
                    ]},
                    { id: 'sort', title: 'ìš°ì„ ìˆœìœ„ (ì •ë ¬)', multi: false, default: 'hits', options: [
                        { value: 'hits', text: 'â­ ë§ì´ ì°¾ëŠ” ìˆœ' }, { value: 'reviews', text: 'ğŸ“ ë¦¬ë·° ë§ì€ ìˆœ' }, { value: 'rating', text: 'ğŸ‘ í‰ì  ë†’ì€ ìˆœ' }, { value: 'like', text: 'â­ï¸ ì¦ê²¨ì°¾ê¸° ë§ì€ ìˆœ' }
                    ]},
                ]
            },
            restaurant: {
                title: 'ğŸ½ï¸ ì‹ë‹¹ ìƒì„¸ í•„í„°',
                groups: [
                    { id: 'companion', title: 'ë™ë°˜ì¸', multi: true, options: [
                        { value: 'solo', text: 'ğŸ‘¤ 1ì¸' }, { value: 'friends', text: 'ğŸ‰ ì¹œêµ¬' }, { value: 'couple', text: 'ğŸ’– ì»¤í”Œ' }, { value: 'family', text: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ê°€ì¡±' }, { value: 'group', text: 'ğŸ¢ ë‹¨ì²´' }
                    ]},
                     { id: 'mood', title: 'ë¶„ìœ„ê¸°', multi: true, options: [
                        { value: 'quiet', text: 'ğŸ¤« ì¡°ìš©í•œ' }, { value: 'solo-friendly', text: 'ğŸš í˜¼ë°¥í•˜ê¸° ì¢‹ì€' }, { value: 'date', text: 'ğŸ’– ë°ì´íŠ¸í•˜ê¸° ì¢‹ì€' },  { value: 'feel good', text: 'ğŸ· ë¶„ìœ„ê¸° ì¢‹ì€' }, { value: 'photo-spot', text: 'ğŸ“¸ ì‚¬ì§„ ë§›ì§‘' }
                    ]},
                    { id: 'amenities', title: 'í¸ì˜ì‹œì„¤', multi: true, options: [
                        { value: 'parking', text: 'ğŸš— ì£¼ì°¨ì¥' }, { value: 'toilet', text: 'ğŸš» í™”ì¥ì‹¤' }, { value: 'pet-friendly', text: 'ğŸ¾ ë°˜ë ¤ë™ë¬¼' }, { value: 'waiting room', text: 'ğŸ›Œ ëŒ€ê¸°ì‹¤' }, { value: 'takeout', text: 'ğŸ¥¡ í¬ì¥' }
                    ]},
                    { id: 'days', title: 'ì˜ì—… ìš”ì¼', multi: true, options: [
                        { value: 'mon', text: 'ì›”' }, { value: 'tue', text: 'í™”' }, { value: 'wed', text: 'ìˆ˜' }, { value: 'thu', text: 'ëª©' }, { value: 'fri', text: 'ê¸ˆ' }, { value: 'sat', text: 'í† ' }, { value: 'sun', text: 'ì¼' }
                    ]},
                    { id: 'type', title: 'ì¢…ë¥˜', multi: true, options: [
                        { value: 'korean', text: 'ğŸš í•œì‹' }, { value: 'chinese', text: 'ğŸœ ì¤‘ì‹' }, { value: 'japanese', text: 'ğŸ£ ì¼ì‹' }, { value: 'western', text: 'ğŸ ì–‘ì‹' }, { value: 'fusion', text: 'ğŸ¥˜ í“¨ì „' }, { value: 'asian', text: 'ğŸ¥  ì•„ì‹œì•ˆ' }
                    ]},
                    { id: 'reservation', title: 'ì˜ˆì•½ ì—¬ë¶€', multi: false, default: 'any', options: [
                        { value: 'any', text: 'ìƒê´€ì—†ìŒ' }, { value: 'possible', text: 'âœ… ê°€ëŠ¥' }, { value: 'impossible', text: 'âŒ ë¶ˆê°€ëŠ¥' }
                    ]},
                     { id: 'sort', title: 'ìš°ì„ ìˆœìœ„ (ì •ë ¬)', multi: false, default: 'hits', options: [
                        { value: 'hits', text: 'â­ ë§ì´ ì°¾ëŠ” ìˆœ' }, { value: 'reviews', text: 'ğŸ“ ë¦¬ë·° ë§ì€ ìˆœ' }, { value: 'rating', text: 'ğŸ‘ í‰ì  ë†’ì€ ìˆœ' }, { value: 'like', text: 'â­ï¸ ì¦ê²¨ì°¾ê¸° ë§ì€ ìˆœ' }
                    ]},
                ]
            }
        };

        // --- í•„í„° ìƒíƒœ ê´€ë¦¬ ---
        let activeFilterCategory = null;
        let selectedFilters = {};

        // âœ… 2. ëª¨ë‹¬ ë‚´ìš©ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
        function buildModalBody(category) {
            activeFilterCategory = category;
            const data = filterData[category];
            modalTitle.innerHTML = data.title;
            modalBody.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ë¹„ìš°ê¸°

            data.groups.forEach(group => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'filter-group mb-4';

                const multiText = group.multi ? '<small class="text-muted">(ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)</small>' : '';
                groupDiv.innerHTML = `<h6>${group.title} ${multiText}</h6>`;

                const btnGroup = document.createElement('div');
                btnGroup.className = 'btn-group flex-wrap gap-2';
                btnGroup.id = `filter-${group.id}`;

                group.options.forEach(opt => {
                    const button = document.createElement('button');
                    button.type = 'button';
                    button.className = 'btn btn-outline-secondary';
                    button.dataset.value = opt.value;
                    button.innerHTML = opt.text;
                    btnGroup.appendChild(button);
                });
                groupDiv.appendChild(btnGroup);
                modalBody.appendChild(groupDiv);
            });
            initializeFilters(); // í•„í„° ìƒíƒœ ì´ˆê¸°í™” ë° UI ë°˜ì˜
        }

        // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---

        // 3. ë©”ì¸ ì¹´í…Œê³ ë¦¬ ì„ íƒ
        mainDropdownItems.forEach(item => {
            item.addEventListener('click', function (event) {
                event.preventDefault();
                const selectedValue = this.getAttribute('data-value');
                mainCategoryButton.innerHTML = this.innerHTML;
                mainCategoryInput.value = selectedValue;

                cafeFilterTrigger.style.display = (selectedValue === 'cafe') ? 'block' : 'none';
                restaurantFilterTrigger.style.display = (selectedValue === 'restaurant') ? 'block' : 'none';
            });
        });

        // 4. í•„í„° ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ë§ëŠ” ëª¨ë‹¬ ë‚´ìš© ìƒì„±
        [cafeFilterTrigger, restaurantFilterTrigger].forEach(trigger => {
            trigger.addEventListener('click', function() {
                const category = this.id.includes('cafe') ? 'cafe' : 'restaurant';
                buildModalBody(category);
            });
        });

        // 5. ëª¨ë‹¬ ë‚´ë¶€ í´ë¦­ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ìœ„ì„)
        modalBody.addEventListener('click', function(event) {
            const button = event.target.closest('button');
            if (!button) return;

            const groupDiv = button.closest('.filter-group');
            const groupId = groupDiv.querySelector('.btn-group').id.replace('filter-', '');
            const value = button.dataset.value;
            const isMulti = filterData[activeFilterCategory].groups.find(g => g.id === groupId).multi;

            if (isMulti) {
                button.classList.toggle('active');
                if (selectedFilters[groupId].has(value)) {
                    selectedFilters[groupId].delete(value);
                } else {
                    selectedFilters[groupId].add(value);
                }
            } else {
                groupDiv.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                selectedFilters[groupId] = value;
            }
        });

        // í•„í„° ìƒíƒœë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
        function initializeFilters() {
            const data = filterData[activeFilterCategory];
            selectedFilters = {}; // ì´ˆê¸°í™”
            data.groups.forEach(group => {
                if (group.multi) {
                    selectedFilters[group.id] = new Set();
                } else {
                    selectedFilters[group.id] = group.default;
                    // UIì— ê¸°ë³¸ê°’ í™œì„±í™” í‘œì‹œ
                    const defaultBtn = modalBody.querySelector(`#filter-${group.id} button[data-value="${group.default}"]`);
                    if (defaultBtn) defaultBtn.classList.add('active');
                }
            });
        }

        // 'í•„í„° ì ìš©' ë²„íŠ¼
        document.getElementById('apply-filters').addEventListener('click', function() {
            for (const key in selectedFilters) {
                const input = document.getElementById(`search-${key}`);
                if (input) {
                    const value = selectedFilters[key];
                    input.value = (value instanceof Set) ? [...value].join(',') : value;
                }
            }
        });

        // 'ì´ˆê¸°í™”' ë²„íŠ¼
        document.getElementById('reset-filters').addEventListener('click', initializeFilters);
    });
</script>